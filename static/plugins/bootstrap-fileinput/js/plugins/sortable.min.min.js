(function kvsortableModule(b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=b()}else{window.KvSortable=b()}}})(function kvsortableFactory(){if(typeof window=="undefined"||!window.document){return function aT(){throw new Error("KvSortable.js requires a window with a document")}}var az,a6,aw,a0,aH,a4,bb,aK,a1,ax,a3,at,bc,aC,ay,bf,bi,aB={},aN,aF,bj,a9=/\s+/g,bl=/left|right|inline/,aS="KvSortable"+(new Date).getTime(),al=window,bg=al.document,a7=al.parseInt,aD=al.jQuery||al.Zepto,aV=al.Polymer,av=false,ba=!!("draggable" in bg.createElement("div")),aR=(function(a){if(!!navigator.userAgent.match(/Trident.*rv[ :]?11\./)){return false}a=bg.createElement("x");a.style.cssText="pointer-events:auto";return a.style.pointerEvents==="auto"})(),a2=false,aL=Math.abs,aE=Math.min,an=[],aq=[],bd=be(function(k,h,o){if(o&&h.scroll){var i=o[aS],n,a,d=h.scrollSensitivity,l=h.scrollSpeed,p=k.clientX,b=k.clientY,m=window.innerWidth,j=window.innerHeight,c,e,f,g;if(a1!==o){aK=h.scroll;a1=o;ax=h.scrollFn;if(aK===true){aK=o;do{if((aK.offsetWidth<aK.scrollWidth)||(aK.offsetHeight<aK.scrollHeight)){break}}while(aK=aK.parentNode)}}if(aK){n=aK;a=aK.getBoundingClientRect();c=(aL(a.right-p)<=d)-(aL(a.left-p)<=d);e=(aL(a.bottom-b)<=d)-(aL(a.top-b)<=d)}if(!(c||e)){c=(m-p<=d)-(p<=d);e=(j-b<=d)-(b<=d);(c||e)&&(n=al)}if(aB.vx!==c||aB.vy!==e||aB.el!==n){aB.el=n;aB.vx=c;aB.vy=e;clearInterval(aB.pid);if(n){aB.pid=setInterval(function(){g=e?e*l:0;f=c?c*l:0;if("function"===typeof(ax)){return ax.call(i,f,g,k)}if(n===al){al.scrollTo(al.pageXOffset+f,al.pageYOffset+g)}else{n.scrollTop+=g;n.scrollLeft+=f}},24)}}}},30),aP=function(c){function b(e,f){if(e===void 0||e===true){e=a.name}if(typeof e==="function"){return e}else{return function(i,g){var h=g.options.group.name;return f?e:e&&(e.join?e.indexOf(h)>-1:(h==e))}}}var a={};var d=c.group;if(!d||typeof d!="object"){d={name:d}}a.name=d.name;a.checkPull=b(d.pull,true);a.checkPut=b(d.put);a.revertClone=d.revertClone;c.group=a};function aM(b,d){if(!(b&&b.nodeType&&b.nodeType===1)){throw"KvSortable: `el` must be HTMLElement, and not "+{}.toString.call(b)}this.el=b;this.options=d=aU({},d);b[aS]=this;var a={group:Math.random(),sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(b.nodeName)?"li":">*",ghostClass:"kvsortable-ghost",chosenClass:"kvsortable-chosen",dragClass:"kvsortable-drag",ignore:"a, img",filter:null,preventOnFilter:true,animation:0,setData:function(f,g){f.setData("Text",g.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,forceFallback:false,fallbackClass:"kvsortable-fallback",fallbackOnBody:false,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var e in a){!(e in d)&&(d[e]=a[e])}aP(d);for(var c in this){if(c.charAt(0)==="_"&&typeof this[c]==="function"){this[c]=this[c].bind(this)}}this.nativeDraggable=d.forceFallback?false:ba;aG(b,"mousedown",this._onTapStart);aG(b,"touchstart",this._onTapStart);aG(b,"pointerdown",this._onTapStart);if(this.nativeDraggable){aG(b,"dragover",this);aG(b,"dragenter",this)}aq.push(this._onDragOver);d.store&&this.sort(d.store.get(this))}aM.prototype={constructor:aM,_onTapStart:function(b){var f=this,h=this.el,a=this.options,k=a.preventOnFilter,d=b.type,g=b.touches&&b.touches[0],e=(g||b).target,i=b.target.shadowRoot&&b.path[0]||e,j=a.filter,c;bm(h);if(az){return}if(d==="mousedown"&&b.button!==0||a.disabled){return}e=aW(e,a.draggable,h);if(!e){return}if(bb===e){return}c=aA(e,a.draggable);if(typeof j==="function"){if(j.call(this,b,e,this)){aQ(f,i,"filter",e,h,c);k&&b.preventDefault();return}}else{if(j){j=j.split(",").some(function(l){l=aW(i,l.trim(),h);if(l){aQ(f,l,"filter",e,h,c);return true}});if(j){k&&b.preventDefault();return}}}if(a.handle&&!aW(i,a.handle,h)){return}this._prepareDragStart(b,g,e,c)},_prepareDragStart:function(c,h,e,d){var g=this,i=g.el,b=g.options,a=i.ownerDocument,f;if(e&&!az&&(e.parentNode===i)){aN=c;aH=i;az=e;a6=az.parentNode;a4=az.nextSibling;bb=e;bf=b.group;aC=d;this._lastX=(h||c).clientX;this._lastY=(h||c).clientY;az.style["will-change"]="transform";f=function(){g._disableDelayedDrag();az.draggable=g.nativeDraggable;a8(az,b.chosenClass,true);g._triggerDragStart(c,h);aQ(g,aH,"choose",az,aH,aC)};b.ignore.split(",").forEach(function(j){ar(az,j.trim(),a5)});aG(a,"mouseup",g._onDrop);aG(a,"touchend",g._onDrop);aG(a,"touchcancel",g._onDrop);aG(a,"pointercancel",g._onDrop);aG(a,"selectstart",g);if(b.delay){aG(a,"mouseup",g._disableDelayedDrag);aG(a,"touchend",g._disableDelayedDrag);aG(a,"touchcancel",g._disableDelayedDrag);aG(a,"mousemove",g._disableDelayedDrag);aG(a,"touchmove",g._disableDelayedDrag);aG(a,"pointermove",g._disableDelayedDrag);g._dragStartTimer=setTimeout(f,b.delay)}else{f()}}},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer);ap(a,"mouseup",this._disableDelayedDrag);ap(a,"touchend",this._disableDelayedDrag);ap(a,"touchcancel",this._disableDelayedDrag);ap(a,"mousemove",this._disableDelayedDrag);ap(a,"touchmove",this._disableDelayedDrag);ap(a,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(c,a){a=a||(c.pointerType=="touch"?c:null);if(a){aN={target:az,clientX:a.clientX,clientY:a.clientY};this._onDragStart(aN,"touch")}else{if(!this.nativeDraggable){this._onDragStart(aN,true)}else{aG(az,"dragend",this);aG(aH,"dragstart",this._onDragStart)}}try{if(bg.selection){setTimeout(function(){bg.selection.empty()})}else{window.getSelection().removeAllRanges()}}catch(b){}},_dragStarted:function(){if(aH&&az){var a=this.options;a8(az,a.ghostClass,true);a8(az,a.dragClass,false);aM.active=this;aQ(this,aH,"start",az,aH,aC)}else{this._nulling()}},_emulateDragOver:function(){if(aF){if(this._lastX===aF.clientX&&this._lastY===aF.clientY){return}this._lastX=aF.clientX;this._lastY=aF.clientY;if(!aR){am(aw,"display","none")}var a=bg.elementFromPoint(aF.clientX,aF.clientY),b=a,c=aq.length;if(b){do{if(b[aS]){while(c--){aq[c]({clientX:aF.clientX,clientY:aF.clientY,target:a,rootEl:b})}break}a=b}while(b=b.parentNode)}if(!aR){am(aw,"display","")}}},_onTouchMove:function(f){if(aN){var c=this.options,d=c.fallbackTolerance,h=c.fallbackOffset,a=f.touches?f.touches[0]:f,e=(a.clientX-aN.clientX)+h.x,g=(a.clientY-aN.clientY)+h.y,b=f.touches?"translate3d("+e+"px,"+g+"px,0)":"translate("+e+"px,"+g+"px)";if(!aM.active){if(d&&aE(aL(a.clientX-this._lastX),aL(a.clientY-this._lastY))<d){return}this._dragStarted()}this._appendGhost();bj=true;aF=a;am(aw,"webkitTransform",b);am(aw,"mozTransform",b);am(aw,"msTransform",b);am(aw,"transform",b);f.preventDefault()}},_appendGhost:function(){if(!aw){var b=az.getBoundingClientRect(),c=am(az),d=this.options,a;aw=az.cloneNode(true);a8(aw,d.ghostClass,false);a8(aw,d.fallbackClass,true);a8(aw,d.dragClass,true);am(aw,"top",b.top-a7(c.marginTop,10));am(aw,"left",b.left-a7(c.marginLeft,10));am(aw,"width",b.width);am(aw,"height",b.height);am(aw,"opacity","0.8");am(aw,"position","fixed");am(aw,"zIndex","100000");am(aw,"pointerEvents","none");d.fallbackOnBody&&bg.body.appendChild(aw)||aH.appendChild(aw);a=aw.getBoundingClientRect();am(aw,"width",b.width*2-a.width);am(aw,"height",b.height*2-a.height)}},_onDragStart:function(d,b){var a=d.dataTransfer,c=this.options;this._offUpEvents();if(bf.checkPull(this,this,az,d)){a0=aY(az);a0.draggable=false;a0.style["will-change"]="";am(a0,"display","none");a8(a0,this.options.chosenClass,false);aH.insertBefore(a0,az);aQ(this,aH,"clone",az)}a8(az,c.dragClass,true);if(b){if(b==="touch"){aG(bg,"touchmove",this._onTouchMove);aG(bg,"touchend",this._onDrop);aG(bg,"touchcancel",this._onDrop);aG(bg,"pointermove",this._onTouchMove);aG(bg,"pointerup",this._onDrop)}else{aG(bg,"mousemove",this._onTouchMove);aG(bg,"mouseup",this._onDrop)}this._loopId=setInterval(this._emulateDragOver,50)}else{if(a){a.effectAllowed="move";c.setData&&c.setData.call(this,a,az)}aG(bg,"drop",this);setTimeout(this._dragStarted,0)}},_onDragOver:function(f){var v=this.el,c,l,a,u,q=this.options,j=q.group,w=aM.active,t=(bf===j),e=false,h=q.sort;if(f.preventDefault!==void 0){f.preventDefault();!q.dragoverBubble&&f.stopPropagation()}if(az.animated){return}bj=true;if(w&&!q.disabled&&(t?h||(u=!aH.contains(az)):(bi===this||((w.lastPullMode=bf.checkPull(this,w,az,f))&&j.checkPut(this,w,az,f))))&&(f.rootEl===void 0||f.rootEl===this.el)){bd(f,q,this.el);if(a2){return}c=aW(f.target,q.draggable,v);l=az.getBoundingClientRect();if(bi!==this){bi=this;e=true}if(u){aX(w,true);a6=aH;if(a0||a4){aH.insertBefore(az,a0||a4)}else{if(!h){aH.appendChild(az)}}return}if((v.children.length===0)||(v.children[0]===aw)||(v===f.target)&&(c=au(v,f))){if(c){if(c.animated){return}a=c.getBoundingClientRect()}aX(w,t);if(aJ(aH,v,az,l,c,a,f)!==false){if(!az.contains(v)){v.appendChild(az);a6=v}this._animate(l,az);c&&this._animate(a,c)}}else{if(c&&!c.animated&&c!==az&&(c.parentNode[aS]!==void 0)){if(a3!==c){a3=c;at=am(c);bc=am(c.parentNode)}a=c.getBoundingClientRect();var s=a.right-a.left,b=a.bottom-a.top,d=bl.test(at.cssFloat+at.display)||(bc.display=="flex"&&bc["flex-direction"].indexOf("row")===0),o=(c.offsetWidth>az.offsetWidth),k=(c.offsetHeight>az.offsetHeight),p=(d?(f.clientX-a.left)/s:(f.clientY-a.top)/b)>0.5,g=c.nextElementSibling,i=aJ(aH,v,az,l,c,a,f),r=false;if(i!==false){a2=true;setTimeout(bk,30);aX(w,t);if(i===1||i===-1){r=(i===1)}else{if(d){var n=az.offsetTop,m=c.offsetTop;if(n===m){r=(c.previousElementSibling===az)&&!o||p&&o}else{if(c.previousElementSibling===az||az.previousElementSibling===c){r=(f.clientY-a.top)/b>0.5}else{r=m>n}}}else{if(!e){r=(g!==az)&&!k||p&&k}}}if(!az.contains(v)){if(r&&!g){v.appendChild(az)}else{c.parentNode.insertBefore(az,r?g:c)}}a6=az.parentNode;this._animate(l,az);this._animate(a,c)}}}}},_animate:function(d,a){var c=this.options.animation;if(c){var b=a.getBoundingClientRect();if(d.nodeType===1){d=d.getBoundingClientRect()}am(a,"transition","none");am(a,"transform","translate3d("+(d.left-b.left)+"px,"+(d.top-b.top)+"px,0)");a.offsetWidth;am(a,"transition","all "+c+"ms");am(a,"transform","translate3d(0,0,0)");clearTimeout(a.animated);a.animated=setTimeout(function(){am(a,"transition","");am(a,"transform","");a.animated=false},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;ap(bg,"touchmove",this._onTouchMove);ap(bg,"pointermove",this._onTouchMove);ap(a,"mouseup",this._onDrop);ap(a,"touchend",this._onDrop);ap(a,"pointerup",this._onDrop);ap(a,"touchcancel",this._onDrop);ap(a,"selectstart",this)},_onDrop:function(c){var a=this.el,b=this.options;clearInterval(this._loopId);clearInterval(aB.pid);clearTimeout(this._dragStartTimer);ap(bg,"mousemove",this._onTouchMove);if(this.nativeDraggable){ap(bg,"drop",this);ap(a,"dragstart",this._onDragStart)}this._offUpEvents();if(c){if(bj){c.preventDefault();!b.dropBubble&&c.stopPropagation()}aw&&aw.parentNode.removeChild(aw);if(aH===a6||aM.active.lastPullMode!=="clone"){a0&&a0.parentNode.removeChild(a0)}if(az){if(this.nativeDraggable){ap(az,"dragend",this)}a5(az);az.style["will-change"]="";a8(az,this.options.ghostClass,false);a8(az,this.options.chosenClass,false);if(aH!==a6){ay=aA(az,b.draggable);if(ay>=0){aQ(null,a6,"add",az,aH,aC,ay);aQ(this,aH,"remove",az,aH,aC,ay);aQ(null,a6,"sort",az,aH,aC,ay);aQ(this,aH,"sort",az,aH,aC,ay)}}else{if(az.nextSibling!==a4){ay=aA(az,b.draggable);if(ay>=0){aQ(this,aH,"update",az,aH,aC,ay);aQ(this,aH,"sort",az,aH,aC,ay)}}}if(aM.active){if(ay==null||ay===-1){ay=aC}aQ(this,aH,"end",az,aH,aC,ay);this.save()}}}this._nulling()},_nulling:function(){aH=az=a6=aw=a4=a0=bb=aK=a1=aN=aF=bj=ay=a3=at=bi=bf=aM.active=null;an.forEach(function(a){a.checked=true});an.length=0},handleEvent:function(a){switch(a.type){case"drop":case"dragend":this._onDrop(a);break;case"dragover":case"dragenter":if(az){this._onDragOver(a);ao(a)}break;case"selectstart":a.preventDefault();break}},toArray:function(){var f=[],b,c=this.el.children,d=0,a=c.length,e=this.options;for(;d<a;d++){b=c[d];if(aW(b,e.draggable,this.el)){f.push(b.getAttribute(e.dataIdAttr)||bh(b))}}return f},sort:function(c){var b={},a=this.el;this.toArray().forEach(function(d,f){var e=a.children[f];if(aW(e,this.options.draggable,a)){b[d]=e}},this);c.forEach(function(d){if(b[d]){a.removeChild(b[d]);a.appendChild(b[d])}})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return aW(a,b||this.options.draggable,this.el)},option:function(b,a){var c=this.options;if(a===void 0){return c[b]}else{c[b]=a;if(b==="group"){aP(c)}}},destroy:function(){var a=this.el;a[aS]=null;ap(a,"mousedown",this._onTapStart);ap(a,"touchstart",this._onTapStart);ap(a,"pointerdown",this._onTapStart);if(this.nativeDraggable){ap(a,"dragover",this);ap(a,"dragenter",this)}Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")});aq.splice(aq.indexOf(this._onDragOver),1);this._onDrop();this.el=a=null}};function aX(b,a){if(b.lastPullMode!=="clone"){a=true}if(a0&&(a0.state!==a)){am(a0,"display",a?"none":"");if(!a){if(a0.state){if(b.options.group.revertClone){aH.insertBefore(a0,a4);b._animate(az,a0)}else{aH.insertBefore(a0,az)}}}a0.state=a}}function aW(a,c,b){if(a){b=b||bg;do{if((c===">*"&&a.parentNode===b)||aZ(a,c)){return a}}while(a=aO(a))}return null}function aO(a){var b=a.host;return(b&&b.nodeType)?b:a.parentNode}function ao(a){if(a.dataTransfer){a.dataTransfer.dropEffect="move"}a.preventDefault()}function aG(b,a,c){b.addEventListener(a,c,av)}function ap(b,a,c){b.removeEventListener(a,c,av)}function a8(b,d,a){if(b){if(b.classList){b.classList[a?"add":"remove"](d)}else{var c=(" "+b.className+" ").replace(a9," ").replace(" "+d+" "," ");b.className=(c+(a?" "+d:"")).replace(a9," ")}}}function am(c,a,b){var d=c&&c.style;if(d){if(b===void 0){if(bg.defaultView&&bg.defaultView.getComputedStyle){b=bg.defaultView.getComputedStyle(c,"")}else{if(c.currentStyle){b=c.currentStyle}}return a===void 0?b:b[a]}else{if(!(a in d)){a="-webkit-"+a}d[a]=b+(typeof b==="string"?"":"px")}}}function ar(f,d,c){if(f){var b=f.getElementsByTagName(d),e=0,a=b.length;if(c){for(;e<a;e++){c(b[e],e)}}return b}return[]}function aQ(h,f,j,b,i,g,e){h=(h||f[aS]);var d=bg.createEvent("Event"),a=h.options,c="on"+j.charAt(0).toUpperCase()+j.substr(1);d.initEvent(j,true,true);d.to=f;d.from=i||f;d.item=b||f;d.clone=a0;d.oldIndex=g;d.newIndex=e;f.dispatchEvent(d);if(a[c]){a[c].call(h,d)}}function aJ(g,i,h,c,a,k,e){var b,f=g[aS],d=f.options.onMove,j;b=bg.createEvent("Event");b.initEvent("move",true,true);b.to=i;b.from=g;b.dragged=h;b.draggedRect=c;b.related=a||i;b.relatedRect=k||i.getBoundingClientRect();g.dispatchEvent(b);if(d){j=d.call(f,b,e)}return j}function a5(a){a.draggable=false}function bk(){a2=false}function au(b,d){var c=b.lastElementChild,a=c.getBoundingClientRect();return((d.clientY-(a.top+a.height)>5)||(d.clientX-(a.right+a.width)>5))&&c}function bh(b){var a=b.tagName+b.className+b.src+b.href+b.textContent,d=a.length,c=0;while(d--){c+=a.charCodeAt(d)}return c.toString(36)}function aA(a,c){var b=0;if(!a||!a.parentNode){return -1}while(a&&(a=a.previousElementSibling)){if((a.nodeName.toUpperCase()!=="TEMPLATE")&&(c===">*"||aZ(a,c))){b++}}return b}function aZ(a,c){if(a){c=c.split(".");var d=c.shift().toUpperCase(),b=new RegExp("\\s("+c.join("|")+")(?=\\s)","g");return((d===""||a.nodeName.toUpperCase()==d)&&(!c.length||((" "+a.className+" ").match(b)||[]).length==c.length))}return false}function be(a,c){var d,b;return function(){if(d===void 0){d=arguments;b=this;setTimeout(function(){if(d.length===1){a.call(b,d[0])}else{a.apply(b,d)}d=void 0},c)}}}function aU(a,b){if(a&&b){for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}}return a}function aY(a){return aD?aD(a).clone(true)[0]:(aV&&aV.dom?aV.dom(a).cloneNode(true):a.cloneNode(true))}function bm(b){var c=b.getElementsByTagName("input");var d=c.length;while(d--){var a=c[d];a.checked&&an.push(a)}}aG(bg,"touchmove",function(a){if(aM.active){a.preventDefault()}});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){av={capture:false,passive:false}}}))}catch(aI){}aM.utils={on:aG,off:ap,css:am,find:ar,is:function(a,b){return !!aW(a,b,a)},extend:aU,throttle:be,closest:aW,toggleClass:a8,clone:aY,index:aA};aM.create=function(a,b){return new aM(a,b)};aM.version="1.5.1";return aM});(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{b(jQuery)}})(function(b){b.fn.kvsortable=function(f){var e,a=arguments;this.each(function(){var d=b(this),c=d.data("kvsortable");if(!c&&(f instanceof Object||!f)){c=new KvSortable(this,f);d.data("kvsortable",c)}if(c){if(f==="widget"){e=c}else{if(f==="destroy"){c.destroy();d.removeData("kvsortable")}else{if(typeof c[f]==="function"){e=c[f].apply(c,[].slice.call(a,1))}else{if(f in c.options){e=c.option.apply(c,a)}}}}}});return(e===void 0)?this:e}});