(function kvsortableModule(a){if(typeof define==="function"&&define.amd){define(a)}else{if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=a()}else{window.KvSortable=a()}}})(function kvsortableFactory(){if(typeof window=="undefined"||!window.document){return function B(){throw new Error("KvSortable.js requires a window with a document")}}var M,q,P,w,ai,s,l,ag,v,O,t,S,k,ak,N,h,e,K={},E,I,d,n=/\s+/g,b=/left|right|inline/,ac="KvSortable"+(new Date).getTime(),Z=window,g=Z.document,p=Z.parseInt,J=Z.jQuery||Z.Zepto,ab=Z.Polymer,Q=false,m=!!("draggable" in g.createElement("div")),ad=(function(al){if(!!navigator.userAgent.match(/Trident.*rv[ :]?11\./)){return false}al=g.createElement("x");al.style.cssText="pointer-events:auto";return al.style.pointerEvents==="auto"})(),u=false,F=Math.abs,aj=Math.min,X=[],U=[],j=i(function(aA,aB,az){if(az&&aB.scroll){var ap=az[ac],al,ax,au=aB.scrollSensitivity,an=aB.scrollSpeed,ay=aA.clientX,aw=aA.clientY,am=window.innerWidth,ao=window.innerHeight,av,at,ar,aq;if(v!==az){ag=aB.scroll;v=az;O=aB.scrollFn;if(ag===true){ag=az;do{if((ag.offsetWidth<ag.scrollWidth)||(ag.offsetHeight<ag.scrollHeight)){break}}while(ag=ag.parentNode)}}if(ag){al=ag;ax=ag.getBoundingClientRect();av=(F(ax.right-ay)<=au)-(F(ax.left-ay)<=au);at=(F(ax.bottom-aw)<=au)-(F(ax.top-aw)<=au)}if(!(av||at)){av=(am-ay<=au)-(ay<=au);at=(ao-aw<=au)-(aw<=au);(av||at)&&(al=Z)}if(K.vx!==av||K.vy!==at||K.el!==al){K.el=al;K.vx=av;K.vy=at;clearInterval(K.pid);if(al){K.pid=setInterval(function(){aq=at?at*an:0;ar=av?av*an:0;if("function"===typeof(O)){return O.call(ap,ar,aq,aA)}if(al===Z){Z.scrollTo(Z.pageXOffset+ar,Z.pageYOffset+aq)}else{al.scrollTop+=aq;al.scrollLeft+=ar}},24)}}}},30),D=function(am){function an(aq,ap){if(aq===void 0||aq===true){aq=ao.name}if(typeof aq==="function"){return aq}else{return function(au,at){var ar=at.options.group.name;return ap?aq:aq&&(aq.join?aq.indexOf(ar)>-1:(ar==aq))}}}var ao={};var al=am.group;if(!al||typeof al!="object"){al={name:al}}ao.name=al.name;ao.checkPull=an(al.pull,true);ao.checkPut=an(al.put);ao.revertClone=al.revertClone;am.group=ao};function af(ao,am){if(!(ao&&ao.nodeType&&ao.nodeType===1)){throw"KvSortable: `el` must be HTMLElement, and not "+{}.toString.call(ao)}this.el=ao;this.options=am=A({},am);ao[ac]=this;var ap={group:Math.random(),sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(ao.nodeName)?"li":">*",ghostClass:"kvsortable-ghost",chosenClass:"kvsortable-chosen",dragClass:"kvsortable-drag",ignore:"a, img",filter:null,preventOnFilter:true,animation:0,setData:function(ar,aq){ar.setData("Text",aq.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,forceFallback:false,fallbackClass:"kvsortable-fallback",fallbackOnBody:false,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var al in ap){!(al in am)&&(am[al]=ap[al])}D(am);for(var an in this){if(an.charAt(0)==="_"&&typeof this[an]==="function"){this[an]=this[an].bind(this)}}this.nativeDraggable=am.forceFallback?false:m;H(ao,"mousedown",this._onTapStart);H(ao,"touchstart",this._onTapStart);H(ao,"pointerdown",this._onTapStart);if(this.nativeDraggable){H(ao,"dragover",this);H(ao,"dragenter",this)}U.push(this._onDragOver);am.store&&this.sort(am.store.get(this))}af.prototype={constructor:af,_onTapStart:function(av){var aq=this,ao=this.el,aw=this.options,al=aw.preventOnFilter,at=av.type,ap=av.touches&&av.touches[0],ar=(ap||av).target,an=av.target.shadowRoot&&av.path[0]||ar,am=aw.filter,au;a(ao);if(M){return}if(at==="mousedown"&&av.button!==0||aw.disabled){return}ar=aa(ar,aw.draggable,ao);if(!ar){return}if(l===ar){return}au=L(ar,aw.draggable);if(typeof am==="function"){if(am.call(this,av,ar,this)){C(aq,an,"filter",ar,ao,au);al&&av.preventDefault();return}}else{if(am){am=am.split(",").some(function(ax){ax=aa(an,ax.trim(),ao);if(ax){C(aq,ax,"filter",ar,ao,au);return true}});if(am){al&&av.preventDefault();return}}}if(aw.handle&&!aa(an,aw.handle,ao)){return}this._prepareDragStart(av,ap,ar,au)},_prepareDragStart:function(ar,am,ap,aq){var an=this,al=an.el,at=an.options,au=al.ownerDocument,ao;if(ap&&!M&&(ap.parentNode===al)){E=ar;ai=al;M=ap;q=M.parentNode;s=M.nextSibling;l=ap;h=at.group;ak=aq;this._lastX=(am||ar).clientX;this._lastY=(am||ar).clientY;M.style["will-change"]="transform";ao=function(){an._disableDelayedDrag();M.draggable=an.nativeDraggable;o(M,at.chosenClass,true);an._triggerDragStart(ar,am);C(an,ai,"choose",M,ai,ak)};at.ignore.split(",").forEach(function(av){T(M,av.trim(),r)});H(au,"mouseup",an._onDrop);H(au,"touchend",an._onDrop);H(au,"touchcancel",an._onDrop);H(au,"pointercancel",an._onDrop);H(au,"selectstart",an);if(at.delay){H(au,"mouseup",an._disableDelayedDrag);H(au,"touchend",an._disableDelayedDrag);H(au,"touchcancel",an._disableDelayedDrag);H(au,"mousemove",an._disableDelayedDrag);H(au,"touchmove",an._disableDelayedDrag);H(au,"pointermove",an._disableDelayedDrag);an._dragStartTimer=setTimeout(ao,at.delay)}else{ao()}}},_disableDelayedDrag:function(){var al=this.el.ownerDocument;clearTimeout(this._dragStartTimer);V(al,"mouseup",this._disableDelayedDrag);V(al,"touchend",this._disableDelayedDrag);V(al,"touchcancel",this._disableDelayedDrag);V(al,"mousemove",this._disableDelayedDrag);V(al,"touchmove",this._disableDelayedDrag);V(al,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(al,an){an=an||(al.pointerType=="touch"?al:null);if(an){E={target:M,clientX:an.clientX,clientY:an.clientY};this._onDragStart(E,"touch")}else{if(!this.nativeDraggable){this._onDragStart(E,true)}else{H(M,"dragend",this);H(ai,"dragstart",this._onDragStart)}}try{if(g.selection){setTimeout(function(){g.selection.empty()})}else{window.getSelection().removeAllRanges()}}catch(am){}},_dragStarted:function(){if(ai&&M){var al=this.options;o(M,al.ghostClass,true);o(M,al.dragClass,false);af.active=this;C(this,ai,"start",M,ai,ak)}else{this._nulling()}},_emulateDragOver:function(){if(I){if(this._lastX===I.clientX&&this._lastY===I.clientY){return}this._lastX=I.clientX;this._lastY=I.clientY;if(!ad){Y(P,"display","none")}var an=g.elementFromPoint(I.clientX,I.clientY),am=an,al=U.length;if(am){do{if(am[ac]){while(al--){U[al]({clientX:I.clientX,clientY:I.clientY,target:an,rootEl:am})}break}an=am}while(am=am.parentNode)}if(!ad){Y(P,"display","")}}},_onTouchMove:function(an){if(E){var aq=this.options,ap=aq.fallbackTolerance,al=aq.fallbackOffset,at=an.touches?an.touches[0]:an,ao=(at.clientX-E.clientX)+al.x,am=(at.clientY-E.clientY)+al.y,ar=an.touches?"translate3d("+ao+"px,"+am+"px,0)":"translate("+ao+"px,"+am+"px)";if(!af.active){if(ap&&aj(F(at.clientX-this._lastX),F(at.clientY-this._lastY))<ap){return}this._dragStarted()}this._appendGhost();d=true;I=at;Y(P,"webkitTransform",ar);Y(P,"mozTransform",ar);Y(P,"msTransform",ar);Y(P,"transform",ar);an.preventDefault()}},_appendGhost:function(){if(!P){var an=M.getBoundingClientRect(),am=Y(M),al=this.options,ao;P=M.cloneNode(true);o(P,al.ghostClass,false);o(P,al.fallbackClass,true);o(P,al.dragClass,true);Y(P,"top",an.top-p(am.marginTop,10));Y(P,"left",an.left-p(am.marginLeft,10));Y(P,"width",an.width);Y(P,"height",an.height);Y(P,"opacity","0.8");Y(P,"position","fixed");Y(P,"zIndex","100000");Y(P,"pointerEvents","none");al.fallbackOnBody&&g.body.appendChild(P)||ai.appendChild(P);ao=P.getBoundingClientRect();Y(P,"width",an.width*2-ao.width);Y(P,"height",an.height*2-ao.height)}},_onDragStart:function(al,an){var ao=al.dataTransfer,am=this.options;this._offUpEvents();if(h.checkPull(this,this,M,al)){w=y(M);w.draggable=false;w.style["will-change"]="";Y(w,"display","none");o(w,this.options.chosenClass,false);ai.insertBefore(w,M);C(this,ai,"clone",M)}o(M,am.dragClass,true);if(an){if(an==="touch"){H(g,"touchmove",this._onTouchMove);H(g,"touchend",this._onDrop);H(g,"touchcancel",this._onDrop);H(g,"pointermove",this._onTouchMove);H(g,"pointerup",this._onDrop)}else{H(g,"mousemove",this._onTouchMove);H(g,"mouseup",this._onDrop)}this._loopId=setInterval(this._emulateDragOver,50)}else{if(ao){ao.effectAllowed="move";am.setData&&am.setData.call(this,ao,M)}H(g,"drop",this);setTimeout(this._dragStarted,0)}},_onDragOver:function(aw){var am=this.el,aI,at,az,an,aq=this.options,au=aq.group,al=af.active,ao=(h===au),aH=false,aG=aq.sort;if(aw.preventDefault!==void 0){aw.preventDefault();!aq.dragoverBubble&&aw.stopPropagation()}if(M.animated){return}d=true;if(al&&!aq.disabled&&(ao?aG||(an=!ai.contains(M)):(e===this||((al.lastPullMode=h.checkPull(this,al,M,aw))&&au.checkPut(this,al,M,aw))))&&(aw.rootEl===void 0||aw.rootEl===this.el)){j(aw,aq,this.el);if(u){return}aI=aa(aw.target,aq.draggable,am);at=M.getBoundingClientRect();if(e!==this){e=this;aH=true}if(an){z(al,true);q=ai;if(w||s){ai.insertBefore(M,w||s)}else{if(!aG){ai.appendChild(M)}}return}if((am.children.length===0)||(am.children[0]===P)||(am===aw.target)&&(aI=R(am,aw))){if(aI){if(aI.animated){return}az=aI.getBoundingClientRect()}z(al,ao);if(G(ai,am,M,at,aI,az,aw)!==false){if(!M.contains(am)){am.appendChild(M);q=am}this._animate(at,M);aI&&this._animate(az,aI)}}else{if(aI&&!aI.animated&&aI!==M&&(aI.parentNode[ac]!==void 0)){if(t!==aI){t=aI;S=Y(aI);k=Y(aI.parentNode)}az=aI.getBoundingClientRect();var aA=az.right-az.left,ay=az.bottom-az.top,ax=b.test(S.cssFloat+S.display)||(k.display=="flex"&&k["flex-direction"].indexOf("row")===0),aC=(aI.offsetWidth>M.offsetWidth),aE=(aI.offsetHeight>M.offsetHeight),aB=(ax?(aw.clientX-az.left)/aA:(aw.clientY-az.top)/ay)>0.5,av=aI.nextElementSibling,aF=G(ai,am,M,at,aI,az,aw),ap=false;if(aF!==false){u=true;setTimeout(c,30);z(al,ao);if(aF===1||aF===-1){ap=(aF===1)}else{if(ax){var ar=M.offsetTop,aD=aI.offsetTop;if(ar===aD){ap=(aI.previousElementSibling===M)&&!aC||aB&&aC}else{if(aI.previousElementSibling===M||M.previousElementSibling===aI){ap=(aw.clientY-az.top)/ay>0.5}else{ap=aD>ar}}}else{if(!aH){ap=(av!==M)&&!aE||aB&&aE}}}if(!M.contains(am)){if(ap&&!av){am.appendChild(M)}else{aI.parentNode.insertBefore(M,ap?av:aI)}}q=M.parentNode;this._animate(at,M);this._animate(az,aI)}}}}},_animate:function(al,ao){var am=this.options.animation;if(am){var an=ao.getBoundingClientRect();if(al.nodeType===1){al=al.getBoundingClientRect()}Y(ao,"transition","none");Y(ao,"transform","translate3d("+(al.left-an.left)+"px,"+(al.top-an.top)+"px,0)");ao.offsetWidth;Y(ao,"transition","all "+am+"ms");Y(ao,"transform","translate3d(0,0,0)");clearTimeout(ao.animated);ao.animated=setTimeout(function(){Y(ao,"transition","");Y(ao,"transform","");ao.animated=false},am)}},_offUpEvents:function(){var al=this.el.ownerDocument;V(g,"touchmove",this._onTouchMove);V(g,"pointermove",this._onTouchMove);V(al,"mouseup",this._onDrop);V(al,"touchend",this._onDrop);V(al,"pointerup",this._onDrop);V(al,"touchcancel",this._onDrop);V(al,"selectstart",this)},_onDrop:function(al){var an=this.el,am=this.options;clearInterval(this._loopId);clearInterval(K.pid);clearTimeout(this._dragStartTimer);V(g,"mousemove",this._onTouchMove);if(this.nativeDraggable){V(g,"drop",this);V(an,"dragstart",this._onDragStart)}this._offUpEvents();if(al){if(d){al.preventDefault();!am.dropBubble&&al.stopPropagation()}P&&P.parentNode.removeChild(P);if(ai===q||af.active.lastPullMode!=="clone"){w&&w.parentNode.removeChild(w)}if(M){if(this.nativeDraggable){V(M,"dragend",this)}r(M);M.style["will-change"]="";o(M,this.options.ghostClass,false);o(M,this.options.chosenClass,false);if(ai!==q){N=L(M,am.draggable);if(N>=0){C(null,q,"add",M,ai,ak,N);C(this,ai,"remove",M,ai,ak,N);C(null,q,"sort",M,ai,ak,N);C(this,ai,"sort",M,ai,ak,N)}}else{if(M.nextSibling!==s){N=L(M,am.draggable);if(N>=0){C(this,ai,"update",M,ai,ak,N);C(this,ai,"sort",M,ai,ak,N)}}}if(af.active){if(N==null||N===-1){N=ak}C(this,ai,"end",M,ai,ak,N);this.save()}}}this._nulling()},_nulling:function(){ai=M=q=P=s=w=l=ag=v=E=I=d=N=t=S=e=h=af.active=null;X.forEach(function(al){al.checked=true});X.length=0},handleEvent:function(al){switch(al.type){case"drop":case"dragend":this._onDrop(al);break;case"dragover":case"dragenter":if(M){this._onDragOver(al);W(al)}break;case"selectstart":al.preventDefault();break}},toArray:function(){var al=[],ap,ao=this.el.children,an=0,aq=ao.length,am=this.options;for(;an<aq;an++){ap=ao[an];if(aa(ap,am.draggable,this.el)){al.push(ap.getAttribute(am.dataIdAttr)||f(ap))}}return al},sort:function(al){var am={},an=this.el;this.toArray().forEach(function(aq,ao){var ap=an.children[ao];if(aa(ap,this.options.draggable,an)){am[aq]=ap}},this);al.forEach(function(ao){if(am[ao]){an.removeChild(am[ao]);an.appendChild(am[ao])}})},save:function(){var al=this.options.store;al&&al.set(this)},closest:function(am,al){return aa(am,al||this.options.draggable,this.el)},option:function(am,an){var al=this.options;if(an===void 0){return al[am]}else{al[am]=an;if(am==="group"){D(al)}}},destroy:function(){var al=this.el;al[ac]=null;V(al,"mousedown",this._onTapStart);V(al,"touchstart",this._onTapStart);V(al,"pointerdown",this._onTapStart);if(this.nativeDraggable){V(al,"dragover",this);V(al,"dragenter",this)}Array.prototype.forEach.call(al.querySelectorAll("[draggable]"),function(am){am.removeAttribute("draggable")});U.splice(U.indexOf(this._onDragOver),1);this._onDrop();this.el=al=null}};function z(al,am){if(al.lastPullMode!=="clone"){am=true}if(w&&(w.state!==am)){Y(w,"display",am?"none":"");if(!am){if(w.state){if(al.options.group.revertClone){ai.insertBefore(w,s);al._animate(M,w)}else{ai.insertBefore(w,M)}}}w.state=am}}function aa(an,al,am){if(an){am=am||g;do{if((al===">*"&&an.parentNode===am)||x(an,al)){return an}}while(an=ae(an))}return null}function ae(am){var al=am.host;return(al&&al.nodeType)?al:am.parentNode}function W(al){if(al.dataTransfer){al.dataTransfer.dropEffect="move"}al.preventDefault()}function H(am,an,al){am.addEventListener(an,al,Q)}function V(am,an,al){am.removeEventListener(an,al,Q)}function o(an,al,ao){if(an){if(an.classList){an.classList[ao?"add":"remove"](al)}else{var am=(" "+an.className+" ").replace(n," ").replace(" "+al+" "," ");an.className=(am+(ao?" "+al:"")).replace(n," ")}}}function Y(am,ao,an){var al=am&&am.style;if(al){if(an===void 0){if(g.defaultView&&g.defaultView.getComputedStyle){an=g.defaultView.getComputedStyle(am,"")}else{if(am.currentStyle){an=am.currentStyle}}return ao===void 0?an:an[ao]}else{if(!(ao in al)){ao="-webkit-"+ao}al[ao]=an+(typeof an==="string"?"":"px")}}}function T(al,an,ao){if(al){var ap=al.getElementsByTagName(an),am=0,aq=ap.length;if(ao){for(;am<aq;am++){ao(ap[am],am)}}return ap}return[]}function C(an,ap,al,au,am,ao,aq){an=(an||ap[ac]);var ar=g.createEvent("Event"),av=an.options,at="on"+al.charAt(0).toUpperCase()+al.substr(1);ar.initEvent(al,true,true);ar.to=ap;ar.from=am||ap;ar.item=au||ap;ar.clone=w;ar.oldIndex=ao;ar.newIndex=aq;ap.dispatchEvent(ar);if(av[at]){av[at].call(an,ar)}}function G(ap,an,ao,au,aw,al,ar){var av,aq=ap[ac],at=aq.options.onMove,am;av=g.createEvent("Event");av.initEvent("move",true,true);av.to=an;av.from=ap;av.dragged=ao;av.draggedRect=au;av.related=aw||an;av.relatedRect=al||an.getBoundingClientRect();ap.dispatchEvent(av);if(at){am=at.call(aq,av,ar)}return am}function r(al){al.draggable=false}function c(){u=false}function R(an,al){var am=an.lastElementChild,ao=am.getBoundingClientRect();return((al.clientY-(ao.top+ao.height)>5)||(al.clientX-(ao.right+ao.width)>5))&&am}function f(an){var ao=an.tagName+an.className+an.src+an.href+an.textContent,al=ao.length,am=0;while(al--){am+=ao.charCodeAt(al)}return am.toString(36)}function L(an,al){var am=0;if(!an||!an.parentNode){return -1}while(an&&(an=an.previousElementSibling)){if((an.nodeName.toUpperCase()!=="TEMPLATE")&&(al===">*"||x(an,al))){am++}}return am}function x(ao,am){if(ao){am=am.split(".");var al=am.shift().toUpperCase(),an=new RegExp("\\s("+am.join("|")+")(?=\\s)","g");return((al===""||ao.nodeName.toUpperCase()==al)&&(!am.length||((" "+ao.className+" ").match(an)||[]).length==am.length))}return false}function i(ao,am){var al,an;return function(){if(al===void 0){al=arguments;an=this;setTimeout(function(){if(al.length===1){ao.call(an,al[0])}else{ao.apply(an,al)}al=void 0},am)}}}function A(an,am){if(an&&am){for(var al in am){if(am.hasOwnProperty(al)){an[al]=am[al]}}}return an}function y(al){return J?J(al).clone(true)[0]:(ab&&ab.dom?ab.dom(al).cloneNode(true):al.cloneNode(true))}function a(an){var am=an.getElementsByTagName("input");var al=am.length;while(al--){var ao=am[al];ao.checked&&X.push(ao)}}H(g,"touchmove",function(al){if(af.active){al.preventDefault()}});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Q={capture:false,passive:false}}}))}catch(ah){}af.utils={on:H,off:V,css:Y,find:T,is:function(am,al){return !!aa(am,al,am)},extend:A,throttle:i,closest:aa,toggleClass:o,clone:y,index:L};af.create=function(am,al){return new af(am,al)};af.version="1.5.1";return af});(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}})(function(a){a.fn.kvsortable=function(c){var d,b=arguments;this.each(function(){var e=a(this),f=e.data("kvsortable");if(!f&&(c instanceof Object||!c)){f=new KvSortable(this,c);e.data("kvsortable",f)}if(f){if(c==="widget"){d=f}else{if(c==="destroy"){f.destroy();e.removeData("kvsortable")}else{if(typeof f[c]==="function"){d=f[c].apply(f,[].slice.call(b,1))}else{if(c in f.options){d=f.option.apply(f,b)}}}}}});return(d===void 0)?this:d}});